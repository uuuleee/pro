var U={"Content-Type":"application/json"};function A(n){let{fetch:e=globalThis.fetch,querySerializer:t,bodySerializer:c,...r}=n??{},a=r.baseUrl??"";a.endsWith("/")&&(a=a.slice(0,-1));async function f(o,i){let{fetch:T=e,headers:j,body:b,params:m={},parseAs:d="json",querySerializer:E=t??C,bodySerializer:g=c??$,...O}=i||{},x=z(o,{baseUrl:a,params:m,querySerializer:E}),S=P(U,n?.headers,j,m.header),u={redirect:"follow",...r,...O,headers:S};b&&(u.body=g(b)),u.body instanceof FormData&&S.delete("Content-Type");let s=await T(x,u);if(s.status===204||s.headers.get("Content-Length")==="0")return s.ok?{data:{},response:s}:{error:{},response:s};if(s.ok){if(d==="stream")return{data:s.clone().body,response:s};let y=s.clone();return{data:typeof y[d]=="function"?await y[d]():await y.text(),response:s}}let l={};try{l=await s.clone().json()}catch{l=await s.clone().text()}return{error:l,response:s}}return{async GET(o,i){return f(o,{...i,method:"GET"})},async PUT(o,i){return f(o,{...i,method:"PUT"})},async POST(o,i){return f(o,{...i,method:"POST"})},async DELETE(o,i){return f(o,{...i,method:"DELETE"})},async OPTIONS(o,i){return f(o,{...i,method:"OPTIONS"})},async HEAD(o,i){return f(o,{...i,method:"HEAD"})},async PATCH(o,i){return f(o,{...i,method:"PATCH"})},async TRACE(o,i){return f(o,{...i,method:"TRACE"})}}}function C(n){let e=[];if(n&&typeof n=="object")for(let[t,c]of Object.entries(n)){let r=p([t],c);r&&e.push(r)}return e.join("&")}function p(n,e){if(e!=null){if(typeof e=="string")return`${h(n)}=${encodeURIComponent(e)}`;if(typeof e=="number"||typeof e=="boolean")return`${h(n)}=${String(e)}`;if(Array.isArray(e)){if(!e.length)return;let t=[];for(let c of e){let r=p(n,c);r!==void 0&&t.push(r)}return t.join("&")}if(typeof e=="object"){if(!Object.keys(e).length)return;let t=[];for(let[c,r]of Object.entries(e))if(r!=null){let a=p([...n,c],r);a!==void 0&&t.push(a)}return t.join("&")}return encodeURIComponent(`${h(n)}=${String(e)}`)}}function h(n){let e=n[0];for(let t of n.slice(1))e+=`[${t}]`;return e}function $(n){return JSON.stringify(n)}function z(n,e){let t=`${e.baseUrl}${n}`;if(e.params.path)for(let[r,a]of Object.entries(e.params.path))t=t.replace(`{${r}}`,encodeURIComponent(String(a)));let c=e.querySerializer(e.params.query??{});return c&&(t+=`?${c}`),t}function P(...n){let e=new Headers;for(let t of n){if(!t||typeof t!="object")continue;let c=t instanceof Headers?t.entries():Object.entries(t);for(let[r,a]of c)a===null?e.delete(r):a!==void 0&&e.set(r,a)}return e}export{z as createFinalURL,A as default,$ as defaultBodySerializer,p as defaultQueryParamSerializer,C as defaultQuerySerializer,P as mergeHeaders};
